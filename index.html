<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Promises</title>
</head>

<script src="doAfter.js"></script>
<script src="axios.js"></script>
<script src="api.js"></script>
<script>


    let msPromise = api.getVacanciesCountFromMicrosoft()
    let gPromise = api.getVacanciesCountFromGoogle()

    msPromise.then(() => console.log('Microsoft finish'))
    gPromise.then(() => console.log('Google finish'))

    let allPromise = Promise.all([msPromise, gPromise])

    allPromise.then((res) => {
        let resFromMS = res[0].data.vacancies
        let resFromG = res[1].data.vacancies

        console.log('Making request to IT_KAMASUTRA')

        api.sendStudentsCountToItKamasutra(resFromMS + resFromG)
            .then(res => {
                console.log(res.data);
            })
    })


    /* пимеры над которорыми работади 1-ый час
    let promise3 = doAfter(3);
    promise3
        .then(() => console.log('я сработал через 3 секунд'))
        .catch(() => console.log('ошибка'))
    */

</script>

</html>